(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6717:function(e,s,t){Promise.resolve().then(t.bind(t,4745))},4745:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(3827),l=t(4090);async function r(e){let s=new URLSearchParams({term:e}),t="/api/search?".concat(s.toString());console.log("Fetching from API:",t);let a=await fetch(t);if(console.log("API Response status:",a.status),!a.ok){let e=await a.json().catch(()=>({}));throw console.error("API Error:",e),Error(e.error||"Failed to fetch from App Store API")}let l=await a.json();return console.log("API Response data:",l),l}function n(e){let{urls:s,onImageClick:t}=e,[r,n]=(0,l.useState)(null),[c,i]=(0,l.useState)(null);return null===r||null===c?(0,a.jsx)("img",{src:s[0],alt:"",className:"hidden",onLoad:e=>{let s=e.currentTarget;n(s.naturalWidth>s.naturalHeight),i(s.naturalWidth/s.naturalHeight)}}):r?(0,a.jsx)("img",{src:s[0],alt:"Screenshot",className:"w-full rounded-lg cursor-pointer",style:{aspectRatio:c},onClick:t}):(0,a.jsx)("div",{className:"flex gap-1.5 overflow-x-auto -mx-4 px-4",children:s.slice(0,3).map((e,s)=>(0,a.jsx)("img",{src:e,alt:"Screenshot ".concat(s+1),className:"h-[144px] w-auto flex-shrink-0 rounded-lg cursor-pointer object-contain",style:{aspectRatio:c},onClick:t},s))})}function c(){let[e,s]=(0,l.useState)(null),[t,c]=(0,l.useState)("portrait"),[i,x]=(0,l.useState)(["","",""]),[o,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[h,p]=(0,l.useState)([]),[g,j]=(0,l.useState)(null),[f,b]=(0,l.useState)(!1),N=async()=>{if(m.trim()){b(!0),console.log("Searching for:",m);try{console.log("Calling searchApps...");let e=await r(m);console.log("Search results:",e),p(e.results),j(null)}catch(e){console.error("Search failed:",e),p([])}finally{b(!1)}}},y=e=>s=>{var t;let a=null===(t=s.target.files)||void 0===t?void 0:t[0];if(a){let s=new FileReader;s.onloadend=()=>{x(t=>{let a=[...t];return a[e]=s.result,a})},s.readAsDataURL(a)}},v=e=>()=>{x(s=>{let t=[...s];return t[e]=null,t})},w=e=>{c(e),"landscape"===e&&x([i[0]||null,null,null])};return(0,a.jsx)("main",{className:"min-h-screen bg-gray-100 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"競合アプリを検索"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&N(),placeholder:"アプリを検索...",className:"flex-1 px-4 py-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{onClick:N,disabled:f,className:"px-6 py-2 bg-blue-500 text-white text-base rounded-lg hover:bg-blue-600 disabled:opacity-50",children:f?"検索中...":"検索"})]})]}),(0,a.jsx)("div",{className:"relative flex justify-center",children:(0,a.jsx)("div",{className:"w-[320px]",children:(0,a.jsxs)("div",{className:"relative bg-black rounded-[50px] aspect-[9/19.5] p-3",children:[(0,a.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-[120px] h-[25px] bg-black rounded-b-3xl z-10"}),(0,a.jsx)("div",{className:"absolute top-[12px] left-1/2 transform -translate-x-1/2 w-[80px] h-[8px] bg-black rounded-full z-10"}),(0,a.jsxs)("div",{className:"bg-white rounded-[40px] h-full overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-white p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[e?(0,a.jsx)("img",{src:e,alt:"App Icon",className:"w-[42px] h-[42px] rounded-xl"}):(0,a.jsx)("div",{className:"w-[42px] h-[42px] bg-gray-200 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400 text-[8px]",children:"No Icon"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-[13px] leading-tight truncate",children:o||"アプリ名"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 mt-0.5",children:"評価: -（-件）"})]})]}),(0,a.jsx)("div",{className:"mt-3 flex gap-2 justify-center",children:"portrait"===t?i.map((e,s)=>(0,a.jsx)("div",{className:"h-[144px] w-auto flex items-center justify-center bg-gray-100 rounded-xl relative",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:e,alt:"Screenshot".concat(s+1),className:"h-[144px] w-auto max-w-full rounded-xl object-contain"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 text-xs text-gray-400",onClick:v(s),children:"\xd7"})]}):(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center h-full w-[48px] cursor-pointer text-gray-400 text-xs",children:[(0,a.jsx)("span",{children:"＋"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:y(s)})]})},s)):(0,a.jsx)("div",{className:"h-[144px] w-auto flex items-center justify-center bg-gray-100 rounded-xl relative",children:i[0]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:i[0],alt:"Screenshot1",className:"h-[144px] w-auto max-w-full rounded-xl object-contain"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 text-xs text-gray-400",onClick:v(0),children:"\xd7"})]}):(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center h-full w-[48px] cursor-pointer text-gray-400 text-xs",children:[(0,a.jsx)("span",{children:"＋"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:y(0)})]})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"p-4",children:f?(0,a.jsx)("div",{className:"text-center py-4 text-gray-500 text-[13px]",children:"検索中..."}):g?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("img",{src:g.artworkUrl512,alt:g.trackName,className:"w-[42px] h-[42px] rounded-xl"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-[13px] leading-tight truncate",children:g.trackName}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 mt-0.5",children:g.averageUserRating?"★ ".concat(g.averageUserRating.toFixed(1),"（").concat(g.userRatingCount.toLocaleString(),"件）"):"評価なし"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 mt-3",children:[(0,a.jsx)(n,{urls:g.screenshotUrls,onImageClick:()=>{}}),(0,a.jsx)("button",{onClick:()=>j(null),className:"text-blue-500 text-[11px]",children:"← 検索結果に戻る"})]})]}):h.length>0?(0,a.jsx)("div",{className:"space-y-6",children:h.map(e=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{onClick:()=>j(e),className:"flex items-start space-x-3 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("img",{src:e.artworkUrl512,alt:e.trackName,className:"w-[42px] h-[42px] rounded-xl"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-[13px] leading-tight truncate",children:e.trackName}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 mt-0.5",children:e.averageUserRating?"★ ".concat(e.averageUserRating.toFixed(1),"（").concat(e.userRatingCount.toLocaleString(),"件）"):"評価なし"})]})]}),(0,a.jsx)(n,{urls:e.screenshotUrls,onImageClick:()=>j(e)}),(0,a.jsx)("div",{className:"border-b border-gray-200"})]},e.trackId))}):(0,a.jsx)("div",{className:"text-center py-4 text-gray-500 text-[13px]",children:m?"検索結果がありません":"競合アプリを検索してください"})})})]})]})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-8",children:"開発アプリのプレビュー"}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"アプリ情報"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"アプリ名"}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"アプリ名を入力"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"アプリアイコン (正方形)"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"1024 x 1024 推奨"}),(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:e?(0,a.jsx)("img",{src:e,alt:"App Icon",className:"max-w-[200px] mx-auto"}):(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"bg-blue-500 text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-600",children:["アイコンをアップロード",(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>s(e.result),e.readAsDataURL(a)}}})]})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"スクリーンショット (縦または横)"}),(0,a.jsxs)("div",{className:"mb-2 flex gap-4 items-center",children:[(0,a.jsx)("span",{className:"text-sm",children:"向き:"}),(0,a.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"orientation",value:"portrait",checked:"portrait"===t,onChange:()=>w("portrait")}),(0,a.jsx)("span",{className:"text-sm",children:"縦"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-1 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"orientation",value:"landscape",checked:"landscape"===t,onChange:()=>w("landscape")}),(0,a.jsx)("span",{className:"text-sm",children:"横"})]})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"iPhone: 1290 x 2796px / iPad: 2048 x 2732px 推奨"}),(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center flex gap-2 justify-center",children:"portrait"===t?i.map((e,s)=>(0,a.jsx)("div",{className:"h-[144px] w-auto flex items-center justify-center bg-gray-100 rounded-xl relative",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:e,alt:"Screenshot".concat(s+1),className:"h-[144px] w-auto max-w-full rounded-xl object-contain"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 text-xs text-gray-400",onClick:v(s),children:"\xd7"})]}):(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center h-full w-[48px] cursor-pointer text-gray-400 text-xs",children:[(0,a.jsx)("span",{children:"＋"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:y(s)})]})},s)):(0,a.jsx)("div",{className:"h-[144px] w-auto flex items-center justify-center bg-gray-100 rounded-xl relative",children:i[0]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:i[0],alt:"Screenshot1",className:"h-[144px] w-auto max-w-full rounded-xl object-contain"}),(0,a.jsx)("button",{type:"button",className:"absolute top-1 right-1 text-xs text-gray-400",onClick:v(0),children:"\xd7"})]}):(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center h-full w-[48px] cursor-pointer text-gray-400 text-xs",children:[(0,a.jsx)("span",{children:"＋"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:y(0)})]})})})]})]})]})]})]})})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=6717)}),_N_E=e.O()}]);